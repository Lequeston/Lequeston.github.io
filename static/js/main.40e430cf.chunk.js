(this["webpackJsonptest-project"]=this["webpackJsonptest-project"]||[]).push([[0],{17:function(e,t,a){e.exports=a(36)},28:function(e,t,a){},29:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),s=a(2),i=(a(28),a(15)),u=(a(29),a(6)),l=a.n(u),E=a(12),m=["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u0439\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"],d="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:",f="\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f:",b="\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e:",p="\u0410\u0432\u0442\u043e\u0440:",y="\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:",h="\u0420\u0435\u0439\u0442\u0438\u043d\u0433:",O={increaseRating:function(e){return{type:"INCREASE_RATING",id:e}},decreaseRating:function(e){return{type:"DECREASE_RATING",id:e}},addChosen:function(e){return{type:"ADD_CHOSEN",id:e}},deleteChosen:function(e){return{type:"DELETE_CHOSEN",id:e}}},_=Object(s.b)(null,O)((function(e){var t=e.book,a=e.increaseRating,n=e.decreaseRating,o=e.deleteChosen,c=e.addChosen,i=t.image,u=t.information,O=t.bookName,_=t.publishingHouse,T=t.author,A=t.id,g=t.dateBirth,v=t.rating,R=t.imgLoaded,N=t.isChosen,S=Object(s.c)(),k=N?r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return o(A)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e"):r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return c(A)}},"\u0414\u043e\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435");return r.a.createElement("div",{className:"col mb-4"},r.a.createElement("div",{className:"card h-100"},r.a.createElement("img",{src:R?i:(S(function(e,t){return function(){var a=Object(E.a)(l.a.mark((function a(n){var r,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch(t);case 3:return r=a.sent,a.next=6,r.blob();case 6:o=a.sent,n({type:"LOAD_PHOTO",blob:o,id:e}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(A,i)),""),className:"card-img-top card-book-image",alt:"loaded"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"".concat(d," ").concat(O)),r.a.createElement("p",{className:"card-text"},"".concat(f," ").concat(u)),r.a.createElement("p",{className:"card-text"},"".concat(b," ").concat(_)),r.a.createElement("p",{className:"card-text"},"".concat(p," ").concat(T)),r.a.createElement("p",{className:"card-text"},"".concat(y," ").concat(g.day," ").concat(m[g.month-1]," ").concat(g.year)),r.a.createElement("p",{className:"card-text"},"".concat(h," ").concat(v)),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return n(A)}},"-"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return a(A)}},"+")),k)))})),T=(a(31),function(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e.arrayBooks.arrayBooks}));return t.length?t.map((function(e){return function(e){var t,a=!0,n=Object(i.a)(e.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;a=a&&r}}catch(o){n.e(o)}finally{n.f()}return a}(e.visible)&&r.a.createElement(_,{book:e,key:e.id})})):(e(function(){var e=Object(E.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://lequeston.github.io/test/books.json");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t({type:"FETCH_ADD_BOOKS",books:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),r.a.createElement("p",{className:"text-center"},"\u041a\u043d\u0438\u0433 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"))}),A=(a(32),function(e){return e.options.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))}),g={filter:function(e,t){return{type:"FILTER",typeFilter:e,value:t}}},v=Object(s.b)(null,g)((function(e){var t=e.name,a=e.options,n=e.type,o=e.filter;return r.a.createElement("div",{className:"flex-fill input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:n},t)),r.a.createElement("select",{className:"custom-select",id:n,onChange:function(e){o(n,e.target.value)}},r.a.createElement(A,{options:a})))})),R=function(e){return e.filters.map((function(e){var t=e.name,a=e.options,n=e.type;return r.a.createElement(v,{name:t,options:a,type:n,key:n})}))},N=Object(s.b)((function(e){return{filters:e.arrayBooks.filters}}),null)((function(e){var t=e.filters;return r.a.createElement("div",{className:"d-flex"},r.a.createElement(R,{filters:t}))})),S=(a(33),a(34),a(35),["btn",["btn-secondary"]]),k={sortBooks:function(e){return{type:"SORT_ARRAY",typeSort:e}}},B=Object(s.b)(null,k)((function(e){var t=e.name,a=e.isAdapt,n=e.type,o=e.sortBooks;a||S.push("disabled");var c=S.join(" ");return r.a.createElement("button",{type:"button",className:c,onClick:function(){return o(n)}},t)})),I=Object(s.b)((function(e){return{sorts:e.arrayBooks.sorts}}),null)((function(e){return e.sorts.map((function(e,t){var a=e.name,n=e.isSortAscending,o=e.isAdapt,c=e.type;return r.a.createElement(B,{name:a,isSortAscending:n,isAdapt:o,type:c,key:t})}))})),C=function(){return r.a.createElement("main",{className:"container"},r.a.createElement("p",{className:"text-uppercase font-weight-bold m-2 filter"}," \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f "),r.a.createElement(N,null),r.a.createElement("p",{className:"text-uppercase font-weight-bold m-2 filter"}," \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 "),r.a.createElement(I,null),r.a.createElement("div",{className:"row row-cols-1 row-cols-md-3 pt-3"},r.a.createElement(T,null)))},j={searchByName:function(e){return{type:"SEARCH_BY_NAME",payload:e}},viewChosen:function(){return{type:"VIEW_CHOSEN"}}},H=Object(s.b)((function(e){return{isChosen:e.arrayBooks.isChosen}}),j)((function(e){var t=e.searchByName,a=e.viewChosen,n=e.isChosen?"\u041e\u0431\u0449\u0435\u0435":"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435";return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"Lequeston"),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:function(e){t(e.target.value)}}),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return a()}},n))})),L=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(4),P=a(1),w=a(3),x={arrayBooks:[],arrayChosen:[],isChosen:!1,filters:[{name:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e",options:["\u0412\u0441\u0451"],type:"TYPE_FILTER_PUBLISHING_HOUSE"},{name:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430",options:["\u0412\u0441\u0451"],type:"TYPE_FILTER_AUTHOR"},{name:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434",options:["\u0412\u0441\u0451"],type:"TYPE_FILTER_DATE_BIRTH_YEAR"}],sorts:[{name:"\u041f\u043e \u0434\u0430\u0442\u0435",isSortAscending:!1,isAdapt:!1,type:"TYPE_SORT_DATE"},{name:"\u041f\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443",isSortAscending:!1,isAdapt:!1,type:"TYPE_SORT_ALPHABET"},{name:"\u041f\u043e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443",isSortAscending:!1,isAdapt:!0,type:"TYPE_SORT_RATING"}]},F=function(){var e,t,a,n,r,o,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,s=arguments.length>1?arguments[1]:void 0,i=function(e,t){return e?t:-t},u=function(e,t){var a=c.sorts.find((function(e){return"TYPE_SORT_ALPHABET"===e.type})).isSortAscending,n=e.bookName.toLowerCase(),r=t.bookName.toLowerCase();if(n===r)return 0;for(var o=Math.min(n.length,r.length),s=0;s<o;s++){if(n[s]>r[s])return i(a,-1);if(n[s]<r[s])return i(a,1)}return n.length<r.length?i(a,-1):i(a,1)},l=function(e,t){var a=e.rating,n=t.rating,r=c.sorts.find((function(e){return"TYPE_SORT_RATING"===e.type})).isSortAscending;return i(r,a-n)},E=function(e,t){var a=c.sorts.find((function(e){return"TYPE_SORT_DATE"===e.type})).isSortAscending,n=new Date(e.dateBirth.year,e.dateBirth.month,e.dateBirth.day),r=new Date(t.dateBirth.year,t.dateBirth.month,t.dateBirth.day);return i(a,r-n)},m=function(){var e=s.id,t=s.type,a=c.arrayBooks.findIndex((function(t){return t.id===e})),n=c.arrayBooks.length,r=Object(w.a)({},c.arrayBooks[a]);return r.rating="INCREASE_RATING"===t?r.rating+1:r.rating-1,[].concat(Object(P.a)(c.arrayBooks.slice(0,a)),[r],Object(P.a)(c.arrayBooks.slice(a+1,n)))},d=function(e,t){var a=t.publishingHouse,n=t.author,r=t.dateBirth,o=Object(P.a)(e);return o.forEach((function(e){switch(e.type){case"TYPE_FILTER_PUBLISHING_HOUSE":e.options=[].concat(Object(P.a)(e.options),[a]);break;case"TYPE_FILTER_DATE_BIRTH_YEAR":e.options=[].concat(Object(P.a)(e.options),[r.year]);break;case"TYPE_FILTER_AUTHOR":e.options=[].concat(Object(P.a)(e.options),[n])}})),o},f=function(e){var t=e.bookName;return{id:e.id,image:e.image,information:e.information,bookName:t,publishingHouse:e.publishingHouse,author:e.author,dateBirth:e.dateBirth,rating:e.rating,imgLoaded:!1,isChosen:!1,visible:new Map([["TYPE_FILTER_DEFAULT",!0]])}};switch(s.type){case"FETCH_ADD_BOOKS":var b=s.books;return(t=(e=Object(P.a)(b.map(f))).reduce(d,c.filters)).forEach((function(e){e.options=Array.from(new Set(e.options))})),e.sort(l),(n=(r=localStorage.getItem("ARRAY_CHOSEN"))?JSON.parse(r):[]).forEach((function(t){return e.find((function(e){return e.id===t})).isChosen=!0})),n=Array.from(new Set(n)),Object(w.a)({},c,{arrayBooks:e,filters:t,arrayChosen:n});case"INCREASE_RATING":return e=m(),c.sorts.find((function(e){return"TYPE_SORT_RATING"===e.type})).isAdapt&&e.sort(l),Object(w.a)({},c,{arrayBooks:e});case"DECREASE_RATING":return Object(w.a)({},c,{arrayBooks:m()});case"LOAD_PHOTO":var p=s.id,y=s.blob,h=c.arrayBooks.findIndex((function(e){return e.id===p})),O=c.arrayBooks.length;return(o=Object(w.a)({},c.arrayBooks[h])).image=URL.createObjectURL(y),o.imgLoaded=!0,e=[].concat(Object(P.a)(c.arrayBooks.slice(0,h)),[o],Object(P.a)(c.arrayBooks.slice(h+1,O))),Object(w.a)({},c,{arrayBooks:e});case"SEARCH_BY_NAME":var _=s.payload,T=_.toLowerCase();return(e=Object(P.a)(c.arrayBooks)).forEach((function(e){var t=e.bookName.toLowerCase();e.visible.set("TYPE_FILTER_INPUT_TEXT",-1!==t.indexOf(T))})),Object(w.a)({},c,{arrayBooks:e});case"FILTER":var A=s.typeFilter,g=s.value,v=function(e){var t=e.publishingHouse,a=e.dateBirth,n=e.author,r=a.year;switch(A){case"TYPE_FILTER_PUBLISHING_HOUSE":e.visible.set("TYPE_FILTER_PUBLISHING_HOUSE","\u0412\u0441\u0451"===g||t===g);break;case"TYPE_FILTER_DATE_BIRTH_YEAR":e.visible.set("TYPE_FILTER_DATE_BIRTH_YEAR","\u0412\u0441\u0451"===g||r.toString()===g);break;case"TYPE_FILTER_AUTHOR":e.visible.set("TYPE_FILTER_AUTHOR","\u0412\u0441\u0451"===g||n===g)}};return(e=Object(P.a)(c.arrayBooks)).forEach(v),Object(w.a)({},c,{arrayBooks:e});case"SORT_ARRAY":var R=s.typeSort;e=Object(P.a)(c.arrayBooks);var N=function(e){return c.sorts.map((function(t){var a=Object(w.a)({},t);return e===t.type?a.isAdapt?a.isSortAscending=!a.isSortAscending:a.isAdapt=!0:a.isAdapt=!1,a}))};switch(a=N(R),R){case"TYPE_SORT_ALPHABET":e.sort(u);break;case"TYPE_SORT_DATE":e.sort(E);break;case"TYPE_SORT_RATING":e.sort(l)}return Object(w.a)({},c,{arrayBooks:e,sorts:a});case"ADD_CHOSEN":return r=localStorage.getItem("ARRAY_CHOSEN"),e=Object(P.a)(c.arrayBooks),n=r?JSON.parse(r):[],n=[].concat(Object(P.a)(n),[s.id]),n=Array.from(new Set(n)),localStorage.setItem("ARRAY_CHOSEN",JSON.stringify(n)),o=e.findIndex((function(e){return e.id===s.id})),e[o]=Object(w.a)({},e[o],{isChosen:!0}),Object(w.a)({},c,{arrayBooks:e,arrayChosen:n});case"DELETE_CHOSEN":r=localStorage.getItem("ARRAY_CHOSEN"),e=Object(P.a)(c.arrayBooks);var S=(n=r?JSON.parse(r):[]).findIndex((function(e){return e===s.id}));return n=[].concat(Object(P.a)(n.slice(0,S)),Object(P.a)(n.slice(S+1,n.length))),localStorage.removeItem("ARRAY_CHOSEN"),localStorage.setItem("ARRAY_CHOSEN",JSON.stringify(n)),o=e.findIndex((function(e){return e.id===s.id})),e[o]=Object(w.a)({},e[o],{isChosen:!1,visible:e[o].visible.set("TYPE_FILTER_IS_CHOSEN",!c.isChosen||!1)}),Object(w.a)({},c,{arrayBooks:e,arrayChosen:n});case"VIEW_CHOSEN":var k=!c.isChosen;return(e=Object(P.a)(c.arrayBooks)).forEach((function(e){var t=e.isChosen;e.visible.set("TYPE_FILTER_IS_CHOSEN",!k||t)})),Object(w.a)({},c,{arrayBooks:e,isChosen:k});default:return c}},D=Object(Y.c)({arrayBooks:F}),U=a(16),G=Object(Y.e)(D,Object(Y.d)(Object(Y.a)(U.a))),J=r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:G},r.a.createElement(L,null)));c.a.render(J,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.40e430cf.chunk.js.map